services:
  - type: web
    name: himalayan-yogini-api
    runtime: docker
    plan: free
    dockerfilePath: ./Dockerfile
    dockerContext: .
    envVars:
      - key: APP_ENV
        value: production
      - key: APP_DEBUG
        value: false
      - key: APP_KEY
        generateValue: true
      # Database Configuration - External MySQL Database
      # IMPORTANT: Set these in Render Dashboard → Environment:
      # DB_HOST, DB_DATABASE, DB_USERNAME, DB_PASSWORD
      - key: DB_CONNECTION
        value: mysql

      # Session Configuration (use array for API - no database required)
      - key: SESSION_DRIVER
        value: array
      # Swagger Configuration
      # Use absolute paths for assets (required for php artisan serve)
      - key: L5_SWAGGER_USE_ABSOLUTE_PATH
        value: true
      - key: L5_SWAGGER_UI_ASSETS_PATH
        value: public/swagger-assets/
      - key: L5_SWAGGER_GENERATE_ALWAYS
        value: true
      - key: L5_FORMAT_TO_USE_FOR_DOCS
        value: json
      - key: L5_SWAGGER_DOCUMENTATIONS_DEFAULT_API_TITLE
        value: Himalayan Yoga API
      # APP_URL will be auto-detected from RENDER_EXTERNAL_URL and converted to HTTPS
      # If you need to override, set APP_URL in Render Dashboard:
      # APP_URL = https://himalayan-yogini-api.onrender.com
      # CORS Configuration
      # Set CORS_ALLOWED_ORIGINS in Render Dashboard → Environment if needed
      # Example: http://209.126.86.149:3002,https://209.126.86.149:3002,http://localhost:3000
      - key: CORS_ALLOWED_ORIGINS
        value: http://209.126.86.149:3002,https://209.126.86.149:3002,http://localhost:3002   